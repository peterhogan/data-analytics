import com.thinkaurelius.titan.core.EdgeLabelimport com.thinkaurelius.titan.core.Multiplicityimport com.thinkaurelius.titan.core.PropertyKeyimport com.thinkaurelius.titan.core.TitanFactoryimport com.thinkaurelius.titan.core.TitanGraphimport com.thinkaurelius.titan.core.TitanTransactionimport com.thinkaurelius.titan.core.attribute.Geoshapeimport com.thinkaurelius.titan.core.schema.ConsistencyModifierimport com.thinkaurelius.titan.core.schema.TitanGraphIndeximport com.thinkaurelius.titan.core.schema.TitanManagementimport org.apache.tinkerpop.gremlin.process.traversal.Orderimport org.apache.tinkerpop.gremlin.structure.Directionimport org.apache.tinkerpop.gremlin.structure.Edgeimport org.apache.tinkerpop.gremlin.structure.Timport org.apache.tinkerpop.gremlin.structure.Vertexgraph = TitanFactory.open('conf/titan-berkeleyje-es.properties')mgmt = graph.openManagement()name = mgmt.makePropertyKey("name").dataType(String.class).make()age = mgmt.makePropertyKey("age").dataType(Integer.class).make()job = mgmt.makePropertyKey("job").dataType(String.class).make()population = mgmt.makePropertyKey("population").dataType(Integer.class).make()relationship = makePropertyKey("relationship").dataType(String.class).make()mgmt.makeEdgeLabel("worksIn").multiplicity(Multiplicity.MANY2ONE).make()mgmt.makeEdgeLabel("livesIn").multiplicity(Multiplicity.MANY2ONE).make()mgmt.makeEdgeLabel("isIn").make()mgmt.makeEdgeLabel("knows").make()mgmt.makeEdgeLabel("isRelated").make()mgmt.makeVertexLabel("person").make()mgmt.makeVertexLabel("county").make()mgmt.makeVertexLabel("country").make()mgmt.commit()TitanTransaction tx = graph.newTransaction()fish = tx.addVertex(T.label, "person", "name", "fish", "age", 26, "job", "swimmer")gin = tx.addVertex(T.label, "person", "name", "gin", "age", 88, "job", "drinker")hal = tx.addVertex(T.label, "person", "name", "hal", "age", 9000, "job", "computer")lilly = tx.addVertex(T.label, "person", "name", "lilly", "age", 43, "job", "flower")magenta = tx.addVertex(T.label, "person", "name", "magenta", "age", 20, "job", "wrapper")nina = tx.addVertex(T.label, "person", "name", "nina", "age", 38, "job", "director-CTU")orin = tx.addVertex(T.label, "person", "name", "orin", "age", 25, "job", "orange")peeves = tx.addVertex(T.label, "person", "name", "peeves", "age", 28, "job", "bulter")quentin = tx.addVertex(T.label, "person", "name", "quentin", "age", 67, "job", "writer")siobhan = tx.addVertex(T.label, "person", "name", "siobhan", "age", 55, "job", "smoker")teegan = tx.addVertex(T.label, "person", "name", "teegan", "age", 26, "job", "maiden")uknown = tx.addVertex(T.label, "person", "name", "unknown", "age", 8, "job", "pokemon")yveltel = tx.addVertex(T.label, "person", "name", "yveltel", "age", 89, "job", "pokemon")zante = tx.addVertex(T.label, "person", "name", "zante", "age", 123, "job", "island")uk = tx.addVertex(T.label, "country", "name", "UK")greece = tx.addVertex(T.label, "country", "name", "Greece")staffs = tx.addVertex(T.label, "county", "name", "staffs", "population", 30000)berks = tx.addVertex(T.label, "county", "name", "berks", "population", 45000)norfolk = tx.addVertex(T.label, "county", "name", "norfolk", "population", 15000)herts = tx.addVertex(T.label, "county", "name", "herts", "population", 43000)hants = tx.addVertex(T.label, "county", "name", "hants", "population", 60000);// edgesfish.addEdge("worksIn", staffs)fish.addEdge("livesIn", uk)fish.addEdge("knows", gin)fish.addEdge("isRelated", gin).property("relationship", "father")fish.addEdge("knows", hal)fish.addEdge("isRelated", teegan).property("relationship", "mother")fish.addEdge("knows", teegan)// commit the transaction to disktx.commit()
